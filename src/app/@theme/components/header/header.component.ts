import { Component, OnDestroy, OnInit } from '@angular/core';
import { NbMediaBreakpointsService, NbMenuService, NbSidebarService, NbThemeService } from '@nebular/theme';

import { UserData } from '../../../@core/data/users';
import { LayoutService } from '../../../@core/utils';
import { map, takeUntil } from 'rxjs/operators';
import { Subject } from 'rxjs';
import { AuthService } from '../../../auth.service';
import { Router } from '@angular/router';

@Component({
  selector: 'ngx-header',
  styleUrls: ['./header.component.scss'],
  templateUrl: './header.component.html',
})
export class HeaderComponent implements OnInit, OnDestroy {
  svgCode: string = `<svg
  id="Layer_1"
  data-name="Layer 1"
  class="icon icon-lg me-2"
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  viewBox="0 0 384.47 94.46"
>
  <image
    width="810"
    height="199"
    transform="scale(0.47)"
    xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAywAAADICAYAAAAKs2WUAAAACXBIWXMAABdgAAAXYAE8fGXsAAAgAElEQVR4Xu3db2wc953f8fcuKcqSJXN1thvXaY/rIr3kikvEVDkYF8nVUOccihwU0S1QFH0Q03lopBANtECj4upV4QQwijYUEBQoUMgrPUgOaM+hYFwQRDlxiEseGJfA1KG53iVovEzj2GlyMRnbEv/u9MFv17tc7e5vfrMzszO7nxewoMT9UiKXszO/z+/fFIIgQEREREREJIuKtgIREREREZFhUWAREREREZHMUmAREREREZHMUmAREREREZHMUmAREREREZHMUmAREREREZHMUmAREREREZHMUmAREREREZHMUmAREREREZHMUmAREREREZHMUmAREREREZHMUmAREREREZHMUmAREREREZHMmrQViAzDV14977X9de3zj7+y0atWREREREZXIQgCW41IKhohZQGYB6Y7nl4HloGlzz/+Sg0RERERGQsKLDJ0X3n1/CywBJy11TZc/vzjr1RsRSIiIiKSfwosMlRfefX8AvCSra6La59//JUFW5GIiIiI5JsW3cvQDBBWAJ7+yqvnK7YiEREREck3jbDIUDSmgb1mqwvhMa1pERERERldGmGRYVmyFYRUsRWIiIiISH5phEVS95VXz5eB1211Dk5o22MRERGR0aQRFhmGeVuBo1lbgYiIiIjkkwKLDEPZVuDIsxWIiIiISD4psMgwxD0iUrIViIiIiEg+KbDIKIg7AImIiIhIRiiwSFenrl9dtNWIiIiIiCRNgUXucer61Xngy6euX/VstRH5tgJHvq1ARERERPJJgUUOOHX9agmoNv5a6V05kJqtwFHNViAiIiIi+aTAIp0qwHTjz2dPXb+axPoQ31bgyLcViIiIiEg+KbDI+xpTwC52fDr2tSyff/yVGrBqqwvpWuPfExEREZERpMAiwD1Twdo93XgubnEEoU2Sm7YmIiIiIhmgwCJNFWCmx3Nx35mezz/+yhrwjK2uj03A0+iKiIiIyGhTYJFeU8HaLfR5LrLPP/5KFXgKEz5c3MaElTVboYiIiIjkWyEIAluNjLhT16/W6D260nTi+5/93IalJpKvvHq+hAlFC8DJPqU3gOVG0BERERGRMaDAMuZOXb9aAZ631QHPfP+zn6vaiuLwlVfPex2f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UP8vhaD+j4EJW30YHzr+Y45NhltIf3ziTY4V37KVHbDDo2HuvbKOmQamsCIiIiIiuTbWgaXpky9/rQT8O8zCdKfV7J0eue/nPHLk57YywD2wBExwh48R9M9WtzEjK1qzIiIiIiK5p8DS4ZMvf20BWAROWkq7clnH4hpYQoyuXAMWFVZEREREZFQosPTwyZe/5mGCywVL6QHHJt/jQ8f/j60McA8s7/ExAqZ6Pf3ci2deWOr1pIiIiIhIHimwWHzy5a+VgQowD0z3LSa5wLLLQ2xT7vaU1quIiIiIyMhSYAmpsc5lEbPOpeuWyE2zJ/6y39PvcwksPUZXrgAVTQETERERkVGlwBKBbZ1L3IFljxJbfKj9U7cxa1X87l8hIiIiIjIaFFgG0GudS9yB5S4fZp/jYO6tUtFaFREREREZFwosMWhb5/LPgONxBpZ9jnOXDwNcBpY0/UtERERExokCS4w++fLXSqWpzf9avn/904RYoB8msOzx4J9s8di/efHMC7W+hSIiIiIiI0iBJQHPrnyhuUB/kT7BxRJYbgOLf3Tmm36vAhERERGRUafAkiBbcOkRWDaBpT86881K5xMiIiIiIuNGgSUFz658oYxZ4/J0++e7BJYbmFGVGiIiIiIiosCSps7g0hZY1jFBZbnnF4uIiIiIjCEFliFoBpfSRO2fHym+/Z8xU8C0+5eIiIiISAcFFhERERERyayirUBERERERGRYFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSzFFhERERERCSz/j+lme+yOKzpYQAAAABJRU5ErkJggg=="
  />
          </svg>`
  private destroy$: Subject<void> = new Subject<void>();
  userPictureOnly: boolean = false;
  user: any;

  themes = [
    {
      value: 'default',
      name: 'Light',
    },
    {
      value: 'dark',
      name: 'Dark',
    },
    {
      value: 'cosmic',
      name: 'Cosmic',
    },
    {
      value: 'corporate',
      name: 'Corporate',
    },
  ];

  currentTheme = 'default';

  userMenu = [ { title: 'Profile' }, { title: 'Log out' } ];

  constructor(private sidebarService: NbSidebarService,
              private menuService: NbMenuService,
              private themeService: NbThemeService,
              private userService: UserData,
              private layoutService: LayoutService,
              private breakpointService: NbMediaBreakpointsService,
              private serv:AuthService,
              private router:Router) {
  }

  ngOnInit() {
    this.currentTheme = this.themeService.currentTheme;

    this.userService.getUsers()
      .pipe(takeUntil(this.destroy$))
      .subscribe((users: any) => this.user = users.nick);

    const { xl } = this.breakpointService.getBreakpointsMap();
    this.themeService.onMediaQueryChange()
      .pipe(
        map(([, currentBreakpoint]) => currentBreakpoint.width < xl),
        takeUntil(this.destroy$),
      )
      .subscribe((isLessThanXl: boolean) => this.userPictureOnly = isLessThanXl);

    this.themeService.onThemeChange()
      .pipe(
        map(({ name }) => name),
        takeUntil(this.destroy$),
      )
      .subscribe(themeName => this.currentTheme = themeName);
  }

  logout():void{
    this.serv.logout()
    this.router.navigate(['/auth']);
  }


  ngOnDestroy() {
    this.destroy$.next();
    this.destroy$.complete();
  }

  changeTheme(themeName: string) {
    this.themeService.changeTheme(themeName);
  }

  toggleSidebar(): boolean {
    this.sidebarService.toggle(true, 'menu-sidebar');
    this.layoutService.changeLayoutSize();

    return false;
  }

  navigateHome() {
    this.menuService.navigateHome();
    return false;
  }
}
